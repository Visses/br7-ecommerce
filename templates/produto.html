<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detalhes do Produto</title>

  <link rel="stylesheet" href="/static/css/produto.css">
  <link rel="stylesheet" href="/static/css/modal-carrinho.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

</head>

<div class="espaco-navbar"></div>
<script>
  window.addEventListener("load", function () {
    const loader = document.getElementById("loader");
    loader.classList.add("fade-out");
    setTimeout(() => {
      loader.style.display = "none";
    }, 400);
  });
</script>

<body>


  <div id="loader">
  <div class="loader-content">
    <img src="{{ url_for('static', filename='images/BR7-logo.PNG') }}" alt="BR7 Logo" class="logo-br7">
    <p class="frase">A melhor loja de produtos esportivos do Brasil.</p>
    <div class="progress-bar">
      <div class="progress"></div>
    </div>
  </div>

  <div class="loader-footer">
    <p>Desenvolvido por <strong>NexusOne</strong></p>
    <img src="{{ url_for('static', filename='images/nexus-logo.png') }}" alt="NexusOne Logo" class="logo-nexus">
  </div>
</div>
  <header class="navbar">
    <div class="menu-btn" onclick="abrirMenu()" id="botaoMenu">
      <i class="fas fa-bars"></i>
    </div>
    <img src="/static/images/BR7-logo.PNG" class="logo"> 
    <div class="carrinho-icon" onclick="abrirCarrinho()">
      <i class="fas fa-shopping-cart"></i>
      <span id="badge-carrinho" class="badge-carrinho">0</span>
    </div>
  </header>



<nav class="menu-lateral" id="menuLateral">
  <div class="menu-item">
    <button class="toggle-submenu">Chuteiras ▾</button>
    <div class="submenu">

      <!-- CAMPO -->
      <div class="menu-item">
        <button class="toggle-submenu">Campo ▾</button>
        <div class="submenu">

          <!-- TRAVA -->
          <div class="menu-item">
            <button class="toggle-submenu">Trava ▾</button>
            <div class="submenu">
              {% for item in chuteiras_campo_trava %}
                <div class="menu-item">
                  <button class="toggle-submenu">{{ item.marca }} ▾</button>
                  <div class="submenu">
                    {% for modelo in item.modelos %}
                      <a href="/loja/chuteiras/campo/trava/{{ item.marca | lower | replace(' ', '-') }}/{{ modelo | lower | replace(' ', '-') }}">{{ modelo }}</a>
                    {% endfor %}
                  </div>
                </div>
              {% else %}
                <p>Nenhuma marca encontrada.</p>
              {% endfor %}
            </div>
          </div>

          <!-- TRAVA MISTA -->
          <div class="menu-item">
            <button class="toggle-submenu">Trava Mista ▾</button>
            <div class="submenu">
              {% for item in chuteiras_campo_trava_mista %}
                <div class="menu-item">
                  <button class="toggle-submenu">{{ item.marca }} ▾</button>
                  <div class="submenu">
                    {% for modelo in item.modelos %}
                      <a href="/loja/chuteiras/campo/trava-mista/{{ item.marca | lower | replace(' ', '-') }}/{{ modelo | lower | replace(' ', '-') }}">{{ modelo }}</a>
                    {% endfor %}
                  </div>
                </div>
              {% else %}
                <p>Nenhuma marca encontrada.</p>
              {% endfor %}
            </div>
          </div>

        </div>
      </div>

      <!-- SOCIETY -->
      <div class="menu-item">
        <button class="toggle-submenu">Society ▾</button>
        <div class="submenu">
          {% for item in chuteiras_society %}
            <div class="menu-item">
              <button class="toggle-submenu">{{ item.marca }} ▾</button>
              <div class="submenu">
                {% for modelo in item.modelos %}
                  <a href="/loja/chuteiras/society/{{ item.marca | lower | replace(' ', '-') }}/{{ modelo | lower | replace(' ', '-') }}">{{ modelo }}</a>
                {% endfor %}
              </div>
            </div>
          {% else %}
            <p>Nenhuma marca encontrada.</p>
          {% endfor %}
        </div>
      </div>

      <!-- FUTSAL -->
      <div class="menu-item">
        <button class="toggle-submenu">Futsal ▾</button>
        <div class="submenu">
          {% for item in chuteiras_futsal %}
            <div class="menu-item">
              <button class="toggle-submenu">{{ item.marca }} ▾</button>
              <div class="submenu">
                {% for modelo in item.modelos %}
                  <a href="/loja/chuteiras/futsal/{{ item.marca | lower | replace(' ', '-') }}/{{ modelo | lower | replace(' ', '-') }}">{{ modelo }}</a>
                {% endfor %}
              </div>
            </div>
          {% else %}
            <p>Nenhuma marca encontrada.</p>
          {% endfor %}
        </div>
      </div>

    </div>
  </div>

  <!-- OUTROS ITENS FIXOS -->
  <a href="/loja/tenis">Tênis</a>
  <a href="/loja/bolsas">Bolsas</a>
  <a href="/loja/pronta-entrega" id="aba-pronta-entrega">Pronta Entrega</a>
  <a href="/" class="menu-ativo">Todos</a>
</nav>


  <main>

  <div class="carrossel">
  <div class="carrossel-imagem-wrapper">
    {% for imagem in imagens %}
      <picture>
        <source srcset="{{ url_for('static', filename='uploads/' + imagem.rsplit('.', 1)[0] + '.webp') }}" type="image/webp">
        <img src="{{ url_for('static', filename='uploads/' + imagem) }}"
             alt="{{ produto.nome }}"
             class="imagem-carrossel {% if loop.first %}ativo{% endif %}"
             id="imagem-carrossel"
             loading="lazy">
      </picture>
    {% endfor %}
  </div>

  <div class="carrossel-controles">
    <button class="seta-carrossel" id="btn-prev">&#10094;</button>

    <div class="carrossel-indicadores">
      {% for imagem in imagens %}
        <span class="indicador {% if loop.first %}ativo{% endif %}" data-indice="{{ loop.index0 }}"></span>
      {% endfor %}
    </div>

    <button class="seta-carrossel" id="btn-next">&#10095;</button>
  </div>
</div>




  <h2>{{ produto.nome }}</h2>
  <p class="preco" id="preco-produto">R$ {{ produto.preco }}</p>

  <!-- Tamanhos (checkboxes) -->
  <div class="grupo-opcoes">
    <label>Tamanhos:</label>
    <div class="opcoes">
      {% for tamanho in produto.tamanhos %}
        <div class="caixa-opcao" onclick="selecionarOpcao(this, 'tamanho')">{{ tamanho }}</div>
      {% endfor %}
    </div>
  </div>
<input type="hidden" id="tamanho">

  <!-- Cores (checkboxes) -->
  <div class="grupo-opcoes">
    <label>Cores:</label>
    <div class="opcoes">
      {% for cor in produto.cores %}
        <div class="caixa-opcao" onclick="selecionarOpcao(this, 'cor')">{{ cor }}</div>
      {% endfor %}
    </div>
  </div>
<input type="hidden" id="cor">

  <!-- Tabela de medidas -->
   <div class="card-tabela">
  <table class="tabela-medidas">
    <thead>
      <tr>
        <th>US</th>
        <th>BR</th>
        <th>EU</th>
        <th>CM</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>6</td><td>36</td><td>38</td><td>24.0CM</td></tr>
      <tr><td>7</td><td>37</td><td>39</td><td>25.0CM</td></tr>
      <tr><td>8</td><td>38</td><td>40</td><td>26.0CM</td></tr>
      <tr><td>9</td><td>39</td><td>41</td><td>27.0CM</td></tr>
      <tr><td>10</td><td>40</td><td>42</td><td>28.0CM</td></tr>
      <tr><td>11</td><td>41</td><td>43</td><td>29.0CM</td></tr>
      <tr><td>12</td><td>42</td><td>44</td><td>30.0CM</td></tr>
      <tr><td>13</td><td>43</td><td>45</td><td>31.0CM</td></tr>
      <tr><td>14</td><td>44</td><td>46</td><td>32.0CM</td></tr>
      <tr><td>15</td><td>45</td><td>47</td><td>33.0CM</td></tr>
      <tr><td>16</td><td>46</td><td>48</td><td>34.0CM</td></tr>
    </tbody>
  </table>
</div>


  <!-- Descrição -->
  <p class="descricao">{{ produto.descricao }}</p>

<h3 style="text-align:center; margin-top: 2rem;">Opções de Parcelamento</h3>
<table class="tabela-parcelas">
  <thead>
    <tr>
      <th>Parcelas</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody id="corpo-parcelas">
    <!-- linhas adicionadas via JavaScript -->
  </tbody>
</table>



  <!-- Aviso Legal -->
  <div class="aviso-legal">
    <strong>ATENÇÃO</strong><br>
    Ao realizar a compra, você concorda com todas as informações apresentadas nos tópicos da aba
    <a href="/politica-servico" onclick="abrirLegal()">LEGAL</a>.
  </div>

  <!-- Cards de Informações -->
  <div class="cards-info">
    <div class="card">
      <h4>ENTREGA RÁPIDA</h4>
      <p>Expresso com código de rastreamento</p>
    </div>
    <div class="card">
      <h4>PARCELE EM 12x</h4>
      <p>Parcele sua compra em até 12x</p>
    </div>
    <div class="card">
      <h4>GARANTIA</h4>
      <p>Garantia contra defeitos de fabricação direto do fabricante</p>
    </div>
    <div class="card">
      <h4>COMPRA SEGURA</h4>
      <p>Seus dados 100% protegidos, do início ao fim da sua compra</p>
    </div>
  </div>

  <!-- Botão Adicionar -->
  <form id="form-produto">
<button type="button" class="btn"
  onclick="adicionarCarrinho(
    event,
    '{{ produto.id }}',
    '{{ produto.nome }}',
    '{{ produto.preco }}',
    '{{ produto.tipo }}',
    '{{ produto.categoria }}',
    '{{ produto.subcategoria }}',
    '{{ produto.disponibilidade }}'
  )">
  Adicionar
</button>


  </form>
</main>


    </form>
  </main>



 <!-- Modal do Carrinho -->
  <div id="modal-carrinho">
    <div class="modal-conteudo">
      <button class="close-modal" onclick="fecharCarrinho()">&times;</button>
      <h3>Carrinho</h3>
      <ul id="lista-carrinho"></ul>
      <p id="total-carrinho"></p>
     <a href="/finalizar-pedido" target="_blank" class="btn-whatsapp" style="text-decoration: none;">
  Finalizar Pedido
</a>

    </div>
  </div>

<script>
  function selecionarOpcao(elemento, tipo) {
    const grupo = elemento.closest('.grupo-opcoes');
    const selecionado = grupo.querySelector('.caixa-opcao.selecionado');

    if (selecionado === elemento) {
      // desmarcar
      elemento.classList.remove('selecionado');
      document.getElementById(tipo).value = '';
    } else {
      if (selecionado) selecionado.classList.remove('selecionado');
      elemento.classList.add('selecionado');
      document.getElementById(tipo).value = elemento.textContent.trim();
    }
  }
</script>


<!-- Coloque ao final do <body> -->
<script src="/static/js/menu.js"></script>
<script src="/static/js/filtro.js"></script>
<script src="/static/js/carrinho.js"></script>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const precoTexto = document.getElementById('preco-produto')?.innerText;
  if (!precoTexto) return;

  const precoOriginal = parseFloat(precoTexto.replace('R$', '').replace('.', '').replace(',', '.'));
  const corpo = document.getElementById('corpo-parcelas');
  if (!corpo || isNaN(precoOriginal)) return;

  const acrescimoFixo = 10; // R$10 fixo ao parcelar
  const taxaJuros = 0.0349; // 3,49% ao mês
  const precoComAcrescimo = precoOriginal + acrescimoFixo;

  for (let i = 2; i <= 16; i++) {
    const j = taxaJuros;
    const n = i;

    // Fórmula de juros compostos com parcelas fixas (tabela Price)
    const parcela = precoComAcrescimo * ((Math.pow(1 + j, n) * j) / (Math.pow(1 + j, n) - 1));
    const valorParcela = parcela.toFixed(2).replace('.', ',');

    const linha = `<tr><td>${i}x</td><td>R$ ${valorParcela}</td></tr>`;
    corpo.innerHTML += linha;
  }
});
</script>










<script>
  const imagens = document.querySelectorAll('.imagem-carrossel');
  const indicadores = document.querySelectorAll('.indicador');
  const btnPrev = document.getElementById('btn-prev');
  const btnNext = document.getElementById('btn-next');
  let indiceAtual = 0;

  function atualizarCarrossel(index) {
    imagens.forEach((img, i) => {
      img.classList.toggle('ativo', i === index);
      indicadores[i].classList.toggle('ativo', i === index);
    });
    indiceAtual = index;
  }

  indicadores.forEach((dot, i) => {
    dot.addEventListener('click', () => atualizarCarrossel(i));
  });

  btnPrev.addEventListener('click', () => {
    let novoIndice = (indiceAtual - 1 + imagens.length) % imagens.length;
    atualizarCarrossel(novoIndice);
  });

  btnNext.addEventListener('click', () => {
    let novoIndice = (indiceAtual + 1) % imagens.length;
    atualizarCarrossel(novoIndice);
  });
</script>






<script>
let ultimaPosicaoScroll = window.scrollY;
const navbar = document.querySelector(".navbar");

window.addEventListener("scroll", () => {
  const posicaoAtual = window.scrollY;

  if (posicaoAtual <= 10) {
    // Estamos no topo — garantir que a navbar fique visível
    navbar.classList.remove("esconder");
    navbar.classList.add("mostrar");
  } else if (posicaoAtual > ultimaPosicaoScroll) {
    // Descendo — esconder
    navbar.classList.remove("mostrar");
    navbar.classList.add("esconder");
  } else {
    // Subindo — mostrar
    navbar.classList.remove("esconder");
    navbar.classList.add("mostrar");
  }

  ultimaPosicaoScroll = posicaoAtual;
});

</script>



</body>


<div id="footer-trigger" style="height: 1px;"></div>

<footer class="footer-br7">
  <div class="footer-wrapper">
    <!-- CATEGORIAS -->
    <div class="footer-column animar-scroll">
  <h4>Categorias</h4>
  <ul>
    <li class="footer-submenu">
      <a  class="submenu-toggle-footer">Chuteiras ▾</a>
      <ul class="submenu-footer">
        <li><a href="/loja/chuteiras/campo/trava">Trava</a></li>
        <li><a href="/loja/chuteiras/campo/trava-mista">Trava Mista</a></li>
        <li><a href="/loja/chuteiras/society">Society</a></li>
        <li><a href="/loja/chuteiras/futsal">Futsal</a></li>
      </ul>
    </li>
    <li><a href="/loja/tenis">Tênis</a></li>
    <li><a href="/loja/bolsas">Bolsas</a></li>
    <li><a href="/loja/pronta-entrega">Pronta Entrega</a></li>
    <li><a href="/">Todos</a></li>
  </ul>
</div>

<script>
// Toggle submenu no footer
document.querySelectorAll('.submenu-toggle-footer').forEach(toggle => {
  toggle.addEventListener('click', (e) => {
    e.preventDefault();
    const submenu = toggle.nextElementSibling;
    const isOpen = submenu.style.display === 'block';
    // Fecha todos antes de abrir
    document.querySelectorAll('.submenu-footer').forEach(sm => sm.style.display = 'none');
    submenu.style.display = isOpen ? 'none' : 'block';
  });
});

// Fecha o submenu ao clicar fora
document.addEventListener('click', (e) => {
  if (!e.target.closest('.footer-submenu')) {
    document.querySelectorAll('.submenu-footer').forEach(sm => sm.style.display = 'none');
  }
});
</script>

    <!-- LINKS ÚTEIS -->
    <div class="footer-column animar-scroll">
      <h4>Links Úteis</h4>
      <ul>
        <li><a href="/quem-somos">Quem Somos</a></li>
        <li><a href="/duvidas-frequentes">Dúvidas Frequentes</a></li>
        <li><a href="/depoimentos">Depoimentos</a></li>
      </ul>
    </div>

    <!-- LEGAL -->
    <div class="footer-column animar-scroll">
      <h4>Legal</h4>
      <ul>
        <li><a href="/politica-envio">Política de Envio</a></li>
        <li><a href="/politica-privacidade">Política de Privacidade</a></li>
        <li><a href="/politica-servico">Política de Serviço</a></li>
        <li><a href="/termos-servico">Termos de Serviço</a></li>
      </ul>
    </div>

 <!-- ATENDIMENTO -->
    <div class="footer-column animar-scroll">
      <h4>Atendimento</h4>
      <p><strong>Whatsapp:</strong><br>(11) 94762-9000</p>
      <div class="footer-icons-rs">
        <a target="_blank" href="https://www.instagram.com/br7chuteiras?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><img src="/static/icons/instagram.png" alt="Instagram"></a>
        
      </div>
    </div>
  </div>

  <!-- PAGAMENTO -->
  <div class="footer-icons payment-icons animar-scroll" style="text-align: center; margin-top: 1.5rem; display: flex; justify-content: center; flex-wrap: wrap;">
    <img src="/static/icons/visa_payment_method_card_icon_142729.svg" alt="Visa">
    <img src="/static/icons/mastercard_old_payment_method_card_icon_142735.svg" alt="Mastercard">
    <img src="/static/icons/elo_payment_method_card_icon_142740.svg" alt="Elo">
    <img src="/static/icons/pix_icon_198027.svg" alt="Pix">
  </div>

  <!-- COPYRIGHT -->
  <div class="footer-bottom animar-scroll">
    <p>© 2025 BR7 Chuteiras. Todos os direitos reservados.</p>
    <p>Desenvolvido por <strong><a href="https://nexusonebr.com" target="_blank" rel="noopener noreferrer">NexusOne</a></strong> - Desenvolvedores de Software e Websites</p>
  </div>
</footer>


<script>
  const elementos = document.querySelectorAll('.animar-scroll');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visivel');
      } else {
        entry.target.classList.remove('visivel'); // Reverso quando sai da tela
      }
    });
  }, {
    threshold: 0.2
  });

  elementos.forEach(el => observer.observe(el));
</script>

</html>
